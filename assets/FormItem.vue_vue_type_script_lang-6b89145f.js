var Z=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var $=(e,s,f)=>s in e?Z(e,s,{enumerable:!0,configurable:!0,writable:!0,value:f}):e[s]=f,d=(e,s)=>{for(var f in s||(s={}))se.call(s,f)&&$(e,f,s[f]);if(E)for(var f of E(s))ne.call(s,f)&&$(e,f,s[f]);return e},G=(e,s)=>ee(e,te(s));import{c as q,u as r,d as oe,G as re,n as ae,l as g,i as le,z as ce,ac as H,E as ie}from"./vue-ea98dac5.js";import{c as J}from"./componentMap-e0a87cc7.js";import{k as Y,s as Q,m as x,S as F,x as z,a3 as ue,a4 as de}from"./index.js";import{K,$ as fe,Y as me,e as he,l as pe}from"./antd-51a19206.js";const{t:W}=Y();function U(e){return e.includes("Input")||e.includes("Complete")?W("common.inputText"):e.includes("Picker")||e.includes("Select")||e.includes("Cascader")||e.includes("Checkbox")||e.includes("Radio")||e.includes("Switch")?W("common.chooseText"):""}const be=["DatePicker","MonthPicker","WeekPicker","TimePicker"];function ge(){return[...be,"RangePicker"]}function Pe(e,s,f){Reflect.has(e,"type")||(["DatePicker","MonthPicker","WeekPicker","TimePicker"].includes(s)?e.type=f?"string":"object":["RangePicker","Upload","CheckboxGroup","TimePicker"].includes(s)?e.type="array":["InputNumber"].includes(s)&&(e.type="number"))}function Se(e,s){return e&&["Input","InputPassword","InputSearch","InputTextArea"].includes(e)&&s&&Q(s)?`${s}`:s}const Te=ge(),Re=["Input","InputPassword","InputSearch","InputTextArea"],Ce=["Upload","ApiTransfer","ApiTree","ApiTreeSelect","ApiRadioGroup","ApiCascader","AutoComplete","RadioButtonGroup"];function ye(e,s){return q(()=>{const f=r(e),{labelCol:M={},wrapperCol:j={}}=f.itemProps||{},{labelWidth:D,disabledLabelWidth:p}=f,{labelWidth:A,labelCol:k,wrapperCol:L,layout:v}=r(s);if(!A&&!D&&!k||p)return M.style={textAlign:"left"},{labelCol:M,wrapperCol:j};let C=D||A;const O=d(d({},k),M),V=d(d({},L),j);return C&&(C=Q(C)?`${C}px`:C),{labelCol:d({style:{width:C}},O),wrapperCol:d({style:{width:v==="vertical"?"100%":`calc(100% - ${C})`}},V)}})}function B(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!le(e)}const Me=oe({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(e,{slots:s}){const{t:f}=Y(),{schema:M,formProps:j}=re(e),D=ye(M,j),p=q(()=>{const{allDefaultValues:n,formModel:t,schema:l}=e,{mergeDynamicData:i}=e.formProps;return{field:l.field,model:t,values:d(d(d({},i),n),t),schema:l}}),A=q(()=>{var a;const{schema:n,tableAction:t,formModel:l,formActionType:i}=e;let{componentProps:o={}}=n;return x(o)&&(o=(a=o({schema:n,tableAction:t,formModel:l,formActionType:i}))!=null?a:{}),n.component==="Divider"&&(o=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},o)),o}),k=q(()=>{const{disabled:n}=e.formProps,{dynamicDisabled:t}=e.schema,{disabled:l=!1}=r(A);let i=!!n||l;return F(t)&&(i=t),x(t)&&(i=t(r(p))),i});function L(){const{show:n,ifShow:t}=e.schema,{showAdvancedButton:l}=e.formProps,i=l&&F(e.isAdvanced)?e.isAdvanced:!0;let o=!0,a=!0;return F(n)&&(o=n),F(t)&&(a=t),x(n)&&(o=n(r(p))),x(t)&&(a=t(r(p))),o=o&&i,{isShow:o,isIfShow:a}}function v(){var R;const{rules:n=[],component:t,rulesMessageJoinLabel:l,label:i,dynamicRules:o,required:a}=e.schema;if(x(o))return o(r(p));let u=he(n);const{rulesMessageJoinLabel:w}=e.formProps,y=(Reflect.has(e.schema,"rulesMessageJoinLabel")?l:w)?i:"",b=t?U(t)+y:y;function m(h,c){const P=h.message||b;return c===void 0||de(c)||Array.isArray(c)&&c.length===0||typeof c=="string"&&c.trim()===""||typeof c=="object"&&Reflect.has(c,"checked")&&Reflect.has(c,"halfChecked")&&Array.isArray(c.checked)&&Array.isArray(c.halfChecked)&&c.checked.length===0&&c.halfChecked.length===0?Promise.reject(P):Promise.resolve()}const T=x(a)?a(r(p)):a;T&&(!u||u.length===0?u=[{required:T,validator:m}]:u.findIndex(c=>Reflect.has(c,"required"))===-1&&u.push({required:T,validator:m}));const N=u.findIndex(h=>Reflect.has(h,"required")&&!Reflect.has(h,"validator"));if(N!==-1){const h=u[N],{isShow:c}=L();if(c||(h.required=!1),t){h.message=h.message||b,(t.includes("Input")||t.includes("Textarea"))&&(h.whitespace=!0);const P=(R=r(A))==null?void 0:R.valueFormat;Pe(h,t,P)}}const I=u.findIndex(h=>h.max);return I!==-1&&!u[I].validator&&(u[I].message=u[I].message||f("component.form.maxTip",[u[I].max])),u}function C(){var h;const{renderComponentContent:n,component:t,field:l,changeEvent:i="change",valueField:o}=e.schema,a=t&&["Switch","Checkbox"].includes(t),u=`on${pe(i)}`,w={[u]:(...c)=>{const[P]=c;m[u]&&m[u](...c);const _=P?P.target:null,X=_?a?_.checked:_.value:P;e.setFormModel(l,X,e.schema)}},S=J.get(t),{autoSetPlaceHolder:y,size:b}=e.formProps,m=G(d({allowClear:!0,getPopupContainer:c=>c.parentNode,size:b},r(A)),{disabled:r(k)});!m.disabled&&y&&t!=="RangePicker"&&t&&(m.placeholder=((h=r(A))==null?void 0:h.placeholder)||U(t)),m.codeField=l,m.formValues=r(p);const N={[o||(a?"checked":"value")]:e.formModel[l]},I=d(d(d({},m),w),N);if(!n)return g(S,I,null);const R=x(n)?d({},n(r(p),{disabled:r(k)})):{default:()=>n};return g(S,I,B(R)?R:{default:()=>[R]})}function O(){const{label:n,helpMessage:t,helpComponentProps:l,subLabel:i}=e.schema,o=i?g("span",null,[n,ie(" "),g("span",{class:"text-secondary"},[i])]):n,a=x(t)?t(r(p)):t;return!a||Array.isArray(a)&&a.length===0?o:g("span",null,[o,g(ue,H({placement:"top",class:"mx-1",text:a},l),null)])}function V(){const{itemProps:n,slot:t,render:l,field:i,suffix:o,component:a}=e.schema,{labelCol:u,wrapperCol:w}=r(D),{colon:S}=e.formProps,y={disabled:r(k)};if(a==="Divider"){let b;return g(K,{span:24},{default:()=>[g(fe,r(A),B(b=O())?b:{default:()=>[b]})]})}else{const b=()=>t?z(s,t,r(p),y):l?l(r(p),y):C(),m=!!o,T=x(o)?o(r(p)):o;return Ce.includes(a)&&e.schema&&(e.schema.itemProps=d({autoLink:!1},e.schema.itemProps)),g(me.Item,H({name:i,colon:S,class:{"suffix-item":m}},n,{label:O(),rules:v(),labelCol:u,wrapperCol:w}),{default:()=>[g("div",{style:"display:flex"},[g("div",{style:"flex:1;"},[b()]),m&&g("span",{class:"suffix"},[T])])]})}}return()=>{let n;const{colProps:t={},colSlot:l,renderColContent:i,component:o,slot:a}=e.schema;if(!J.has(o)&&!a)return null;const{baseColProps:u={}}=e.formProps,w=d(d({},u),t),{isIfShow:S,isShow:y}=L(),b=r(p),m={disabled:r(k)};return S&&ae(g(K,w,B(n=(()=>l?z(s,l,b,m):i?i(b,m):V())())?n:{default:()=>[n]}),[[ce,y]])}}});export{Me as _,Re as a,Te as d,Se as h};
